Version 4
SHEET 1 1816 756
WIRE 864 -480 752 -480
WIRE 1200 -480 944 -480
WIRE 1360 -480 1280 -480
WIRE 1568 -480 1360 -480
WIRE 1760 -480 1568 -480
WIRE 1360 -464 1360 -480
WIRE 1760 -464 1760 -480
WIRE 1360 -384 1360 -400
WIRE 1760 -336 1760 -384
WIRE 560 -176 560 -208
WIRE 752 -176 752 -480
WIRE 752 -176 560 -176
WIRE 864 -176 752 -176
WIRE 1200 -176 944 -176
WIRE 1360 -176 1280 -176
WIRE 1424 -176 1360 -176
WIRE 1552 -176 1504 -176
WIRE 1696 -176 1552 -176
WIRE 1760 -176 1696 -176
WIRE 1360 -160 1360 -176
WIRE 1552 -160 1552 -176
WIRE 1760 -160 1760 -176
WIRE 560 -128 560 -176
WIRE 1360 -80 1360 -96
WIRE 1552 -64 1552 -96
WIRE 1760 -32 1760 -80
WIRE 560 64 560 -48
WIRE 64 96 -352 96
WIRE 64 128 -16 128
WIRE 320 144 240 144
WIRE 64 160 0 160
WIRE -352 208 -352 176
WIRE -16 208 -16 128
WIRE -16 208 -352 208
WIRE -352 224 -352 208
WIRE 0 272 0 160
WIRE 0 272 -256 272
WIRE -256 304 -256 272
WIRE 336 400 336 352
WIRE -256 432 -256 384
WIRE 336 528 336 480
FLAG -352 224 0
FLAG -256 432 0
FLAG 336 528 0
FLAG 336 352 triangle
FLAG 320 144 sample
FLAG 1696 -176 OUT_4o
FLAG 1360 -80 0
FLAG 1760 -32 0
FLAG 1552 -64 0
FLAG 560 64 0
FLAG 560 -208 SW
FLAG 1568 -480 OUT_2o
FLAG 1360 -384 0
FLAG 1760 -336 0
SYMBOL SpecialFunctions\\sample 144 128 R0
SYMATTR InstName A1
SYMBOL voltage -352 80 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value SINE(0 {amp} {Faudio})
SYMBOL voltage -256 288 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(0 5 0 1n 1n {0.5/Fs} {1/Fs})
SYMBOL voltage 336 384 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value PULSE({-amp} {amp} 0 {1/Fpwm} 1n 0 0)
SYMBOL ind 1184 -160 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 20µ
SYMBOL cap 1344 -160 R0
SYMATTR InstName C1
SYMATTR Value 51µ
SYMBOL res 1744 -176 R0
SYMATTR InstName R2
SYMATTR Value 1
SYMBOL ind 1520 -192 R90
WINDOW 0 5 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName L2
SYMATTR Value 51µ
SYMBOL cap 1536 -160 R0
SYMATTR InstName C2
SYMATTR Value 20µ
SYMBOL bv 560 -144 R0
SYMATTR InstName B1
SYMATTR Value V=if(V(sample)>V(triangle), 1,0)
SYMBOL res 960 -192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 1
SYMBOL ind 1184 -464 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L3
SYMATTR Value 39µH
SYMBOL cap 1344 -464 R0
SYMATTR InstName C3
SYMATTR Value 39µF
SYMBOL res 1744 -480 R0
SYMATTR InstName R3
SYMATTR Value 1
SYMBOL res 960 -496 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 1
TEXT -648 264 Left 2 !.param Fs=256k
TEXT -290 456 Left 2 !.tran 50m
TEXT 400 528 Left 2 !.param Fpwm=48K
TEXT -648 224 Left 2 !.param amp=1
TEXT -640 392 Left 2 !.options plotwinsize=0
TEXT -632 416 Left 2 !.options numdgt=12
TEXT 408 616 Left 2 !.four {Faudio} V(out)
TEXT -648 296 Left 2 !.param Faudio=4k
